<table class="table table-hover entity-list">
    <thead class="thead-default">
    <tr>
        <th width="2%"></th>
        <th width="2%">
            <input type="checkbox" name="sa"
                   [ngModel]="isAllSelected" (change)="updateAll()">
        </th>
        <th width="36%">
            <div class="form-inline">
                <div class="form-group" style="margin-right: 2rem">
                    <select class="form-control form-control-sm custom-select"
                            [(ngModel)]="batchAction" [disabled]="!canEdit">
                        <option value="" selected disabled>批量操作</option>
                        <option value="delete">移到回收站</option>
                        <option value="edit">批量修改</option>
                    </select>

                    <button class="btn btn-sm btn-default" [disabled]="!canEdit"
                            (click)="submitBatchAction()">应用</button>
                </div>
                <span>标题</span>
            </div>
        </th>
        <th width="16%">作者 / 编辑</th>
        <th width="18%">分类</th>
        <th width="12%">发布日期</th>
        <th width="12%">更新日期</th>
        <th width="6%">view</th>
    </tr>
    </thead>

    <tbody>

    <!-- table row of post -->
    <template ngFor let-id [ngForOf]="ids" let-i="index">
        <tr>
            <th>{{i+1}}</th>
            <td><input type="checkbox" name="p[]" [ngModel]="isEditing(id)"
                       (change)="updateEditList(id)"></td>
            <!-- Enable fast editing if double click on title column -->
            <td (dblclick)="batchEdit.emit([id])">
                <!-- Locked post -->
                <i class="fa fa-lock" style="color: red" *ngIf="posts[id].lock"></i>
                <!-- Online edit lock -->
                <i class="fa fa-pencil" style="color: red"
                   *ngIf="hasActivity(id) && getActivity(id).edit_lock == 1"></i>
                <!-- Offline edit lock -->
                <i class="fa fa-pencil" style="color: blue"
                   *ngIf="hasActivity(id) && getActivity(id).edit_lock == 2"></i>

                <span *ngIf="posts[id].state != 'publish'" class="tag tag-danger-outline">
                    {{ zh[posts[id].state] }}
                </span>
                <span class="tag tag-default-outline">{{ zh[posts[id].creative_type] }}</span>
                <strong><a [routerLink]="['/post', id ]">{{ posts[id].title }}</a></strong>
                <span class="tag tag-default-outline" *ngIf="hasActivity(id) && getActivity(id).user_id">
                    {{ authors[getActivity(id).user_id].name }} 正在编辑
                </span>
                <div class="row-actions">
                    <span class="trash"><a>删除</a> | </span>
                    <span><a href="{{ previewLink(id) }}" target="_blank">查看</a> | </span>
                    <span>双击快速编辑 | </span>
                    <span class="tag tag-default-outline">{{ zh[posts[id].post_type] }}</span>
                </div>
            </td>
            <td *ngIf="authors[posts[id].author_id]">
                <span>作者: {{ authors[posts[id].author_id].name }}</span>
                <div *ngIf="posts[id].author_id !== posts[id].editor_id">
                    编辑: {{ editors[posts[id].editor_id].name }}
                </div>
            </td>
            <td *ngIf="!authors[posts[id].author_id]">
                FIXME
            </td>
            <td>
                <span *ngFor="let cat of posts[id].categories">
                <a [routerLink]="['/cms/category', cat.id]">{{ cat.name }}</a>, </span>
            </td>
            <td>{{ posts[id].published_at }}</td>
            <td>{{ posts[id].updated_at }}</td>
            <td>
                <span>0</span>
                <div><span>0</span></div> <!-- Comments -->
            </td>
        </tr>
    </template>

    </tbody>
</table>
