<div class="page-header">
    <h1 class="title">
        图片管理
        <a class="btn btn-sm btn-outline-info" (click)="toggleRightBar($event)"><span *ngIf="hideRightBar">上传图片</span><span *ngIf="!hideRightBar">隐藏上传</span></a>
    </h1>
</div>


<!-- Upload dropoff area -->
<accordion>

    <accordion-group>
        <div accordion-heading>
            上传图片<i class="pull-right fa customize-chevron"></i>
        </div>

        <!-- Drop zone -->
        <!--
        <div ngFileDrop class="well drop-zone"
             [options]="options" (onUpload)="handleUpload($event)">
            <h2>把图片拖到此处上传</h2>
            <p>或</p>
            <p>
                <label class="btn btn-secondary">
                    <input type="file" ngFileSelect class="hidden"
                           [options]="options" (onUpload)="handleUpload($event)">
                    选择图片
                </label>
            </p>
            <p>当前图片个数: ??</p>
        </div>

        <div>
            <button class="btn btn-default" (click)="startUpload()">上传</button>
        </div>
        <div>Response: {{ response | json }}</div>
        <div>Progress: {{ progress }}% </div>
        -->


        <!-- Image uploader area -->
    <div class="uploader-area">

        <div>
            <!--
            <div>
                Queue progress:
                <div class="progress" style="">
                    <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }"></div>
                </div>
            </div>
            <button type="button" class="btn btn-outline-success btn-sm"
                    (click)="uploader.uploadAll()" [disabled]="!uploader.getNotUploadedItems().length">
                <span class="fa fa-upload"></span> 全部上传
            </button>
            <button type="button" class="btn btn-outline-warning btn-sm"
                    (click)="uploader.cancelAll()" [disabled]="!uploader.isUploading">
                <span class="fa fa-ban"></span> 全部取消
            </button>
            <button type="button" class="btn btn-outline-danger btn-sm"
                    (click)="uploader.clearQueue()" [disabled]="!uploader.queue.length">
                <span class="fa fa-trash"></span> 全部删除
            </button>
            -->
        </div>

        <!-- Uploading list table -->
        <table class="table" style="font-size: 85%">
            <thead>
            <tr>
                <th width="50%">文件名</th>
                <th width="15%">大小</th>
                <th width="15%">状态</th>
                <th width="20%">操作</th>
            </tr>
            </thead>
            <tbody>
            <!--
            <tr *ngFor="let item of uploader.queue">
                <td><strong>{{ item?.file?.name }}</strong></td>
                <td>0.00 MB</td>
                <td class="text-center">
                    <span *ngIf="item.isSuccess"><i class="fa fa-check"></i></span>
                    <span *ngIf="item.isCancel"><i class="fa fa-ban"></i></span>
                    <span *ngIf="item.isError"><i class="fa fa-close"></i></span>
                </td>
                <td>
                    <button type="button" class="btn btn-danger btn-sm"
                            (click)="item.remove()">
                        <span class="fa fa-trash"></span> 删除
                    </button>
                </td>
            </tr>
            -->
            </tbody>
        </table>

    </div>
    </accordion-group>
</accordion>


<!-- sub menu -->
<nav class="navbar page-sub-menu">
    <ul class="nav navbar-nav">
        <li class="nav-item">
            <!-- Grid layout -->
            <a class="nav-link"><i class="fa fa-th"></i></a>
        </li>

        <li class="nav-item">
            <!-- List layout -->
            <a class="nav-link"><i class="fa fa-list"></i></a>
        </li>

        <!-- Image category -->
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button"
               aria-haspopup="true" aria-expanded="false">图片分类</a>

            <div class="dropdown-menu">
                <a class="dropdown-item">分类1</a>
                <a class="dropdown-item">分类3</a>
                <a class="dropdown-item">分类2</a>
            </div>
        </li>
    </ul>

    <search-box [slug]="'attachment'" [loading]="loading"></search-box>
</nav>



<!-- Image list -->
<!-- FIXME: The image may looks like bit small if white space is too large at both side -->
<!-- FIXME: We can set max-width to sth like 150% but needs to work out how to set height -->
<!-- FIXME: dynamically based on screen resolution(as width is changing) -->
<!-- REF: http://stackoverflow.com/questions/14562457/center-oversized-image-in-div -->
<!-- REF: https://www.sitepoint.com/using-modern-css-to-build-a-responsive-image-grid/ -->
<image-list [etype]="etype"
            [baseResUrl]="imgBaseUrl"
            [entities]="entities$ | async"
            [idsCurPage]="idsCurPage$ | async"
            [idsEditing]="idsEditing$ | async"
            (batchEdit)="batchEdit($event)"
            (batchDelete)="batchDelete($event)"></image-list>

