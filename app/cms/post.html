<editor-page-header
        [pageTitle]="pageTitle"
        [previewUrl]="previewUrl"
        [backUrl]="backUrl">
</editor-page-header>

<!-- Post title and main buttons -->
<div class="form-group">
    <div class="input-group">
        <input type="text" name="title" class="form-control" placeholder="文章标题"
               [(ngModel)]="post.title">
        <span class="input-group-btn">
            <button type="submit" class="btn btn-success"><i class="fa fa-save"></i> 保存</button>
            <!-- Only display these 2 buttons for editors and above -->
            <button type="submit" class="btn btn-primary"><i class="fa fa-eye"></i> 提交审稿</button>
            <button type="submit" class="btn btn-danger"><i class="fa fa-smile-o"></i> 发布</button>
        </span>
    </div>
</div>

<!-- Post category, tag etc -->
<div class="post-tags">
    <div class="post-tag-group">
        <span class="label label-warning">文章分类</span>
        <ul *ngIf="post.categories && post.categories.length <= 0">
            <li class="label label-pill label-default" (click)="toggleRightBar()">选择分类</li>
        </ul>
        <ul *ngIf="post.categories && post.categories.length > 0">
            <li *ngFor="let cat of post.categories" class="label label-pill label-primary"
                (click)="toggleRightBar()">
                <!-- Was removeCat(cat), but we need passing Observable into ChildView -->
                {{ cat.name }} x
            </li>
        </ul>
    </div>

    <div class="post-tag-group">
        <span class="label label-warning">专题</span>
        <ul *ngIf="post.topics && post.topics.length <= 0">
            <li class="label label-pill label-default" (click)="toggleRightBar()">选择专题</li>
        </ul>
        <ul *ngIf="post.topics && post.topics.length > 0">
            <li *ngFor="let topic of post.topics" class="label label-pill label-primary"
                (click)="toggleRightBar()">
                {{ topic.title }} x
            </li>
        </ul>
    </div>

    <div class="post-tag-group">
        <span class="label label-warning">标签</span>
        <ul *ngIf="post.tags && post.tags.length <= 0">
            <li class="label label-pill label-default" (click)="toggleRightBar()">选择标签</li>
        </ul>
        <ul *ngIf="post.tags && post.tags.length > 0">
            <li *ngFor="let tag of post.tags" class="label label-pill label-primary"
                (click)="toggleRightBar()">
                {{ tag.name }} x
            </li>
        </ul>
    </div>
</div>

<!-- Froala Editor -->
<froala [froalaOptions]="options"
        [froalaData]="post.content" (model)="onFroalaModelChanged($event)"
        (editorInitialized)="onEditorInitialized()"></froala>

<p>
    <strong>Dropdown menu</strong>: {{ author?.name || "无作者" }}
    &mdash;
    <a (click)="clearSelection()">Clear selection</a>
</p>
<html-dropdown
        [items]="authors"
        [(value)]="author"
        placeholder="选择作者">

    <template let-author="item">
        <!--<img [src]="( './img/' + author.avatar )" />-->
        <span class="name">
            {{ author.name }} | {{ author.nicename }}
        </span>
    </template>
</html-dropdown>

<!-- Right side bar -->
<div class="right-side-bar" [class.show-right-side-bar]="!hideRightBar">
    <tabset [justified]="true">
        <tab heading="分类">
            <category-tree [isTreeRoot]="showFilter"
                           [categories]="categories"
                           (checkEvent)="checkCat($event)">
            </category-tree>
        </tab>

        <tab heading="标签">
            <tag-cloud [tags]="tags" (checkEvent)="checkTag($event)"></tag-cloud>
        </tab>

        <tab heading="专题">
            <topic-cloud [topics]="topics" (checkEvent)="checkTopic($event)"></topic-cloud>
        </tab>
    </tabset>


</div>