<div class="page-header">
    <h1 class="title">
        订单
        <a class="page-title-action btn btn-sm btn-info-outline" [routerLink]="['/order/new']">新增订单</a>
        <button class="page-title-action btn btn-sm btn-info-outline float-right">详简切换</button>
    </h1>
</div>

<!-- sub menu -->
<nav class="navbar page-sub-menu">
    <ul class="nav navbar-nav">
        <li class="nav-item">
            <a class="nav-link" [routerLink]="['/orders/all/all']">全部</a>
        </li>

        <!-- Various order status tabs -->
        <!--
        <li *ngFor="let s of allStatus" class="nav-item">
            <a class="nav-link" [routerLink]="['/orders/status', s.status]">
                {{ orderStatus[s.status] }}（{{ s.count }}）
            </a>
        </li>
        -->
    </ul>

    <form class="form-inline pull-xs-right">
        <input class="form-control input-sm" type="text" placeholder="搜索订单">
        <button class="btn btn-sm btn-success-outline" type="submit">搜索</button>
    </form>
</nav>

<!-- Filter toobar -->
<div class="list-toolbar">
    <div class="float-left bulk-actions">
        <select class="c-select select-sm">
            <option value="0" selected>批量操作</option>
            <option value="x">移到回收站</option>
            <option value="y">标记为处理中</option>
            <option value="y">完成</option>
            <option value="y">打印</option>
        </select>
        <button type="submit" class="btn btn-secondary btn-sm">应用</button>
    </div>

    <div class="float-right paginator">
        <a class="btn btn-sm btn-secondary" [routerLink]="['/orders', status, pagination.first_page]"><i class="fa fa-angle-double-left"></i></a>
        <a class="btn btn-sm btn-secondary" [routerLink]="['/orders', status, pagination.pre_page]"><i class="fa fa-angle-left"></i></a>
        <a class="btn btn-sm btn-secondary" [routerLink]="['/orders', status, pagination.next_page]"><i class="fa fa-angle-right"></i></a>
        <a class="btn btn-sm btn-secondary" [routerLink]="['/orders', status, pagination.last_page]"><i class="fa fa-angle-double-right"></i></a>
    </div>
</div>

<!-- Order list table -->
<table class="table table-hover" style="font-size: 85%;">
    <thead class="thead-default">
        <tr>
            <th width="2%">
                <input type="checkbox" name="selectedAll"
                       [(ngModel)]="checkedAll" (change)="checkboxAll()">
            </th>
            <th width="5%">订单号</th>
            <th width="2%">状态</th>
            <th width="2%">留言</th>
            <th width="20%">顾客</th>
            <th width="5%">数量</th>
            <th width="8%">下单日期</th>
            <th width="10%">总价</th>
            <th width="15%">快递(单号/价格)</th>
            <th width="15%">操作</th>
        </tr>
    </thead>

    <tbody>
    <!-- table row of order -->
    <template ngFor let-order [ngForOf]="orders" let-i="index">

        <!-- order information short version -->
        <tr id="{{i}}" (dblclick)="fastEditCurrentOrder($event, i)">
            <td><input type="checkbox" name="order[]" [(ngModel)]="order.checked"></td>
            <td><strong><a [routerLink]="['/order', order.id ]">{{ order.id }}</a></strong></td>
            <td><i class="fa fa-circle-o"></i></td>
            <td><i class="fa fa-comment"></i></td>
            <td>
                <!-- 下单用户, 点击弹出model显示此用户信息,不用切换到用户页面, 因为查看用户信息不是重点 -->
                {{ order.customer.name }}
                <div>
                    <span>{{ order.customer.email }}</span>
                </div>
            </td>
            <td>{{ orderItemCount(order) }}</td>
            <td>{{ order.created_at }}</td>
            <td>{{ order.currency}} {{ order.total / 100 }}</td>
            <td>
                {{ order.postage }}
                <div>
                    <span>{{ orderTracking(order) }}</span>
                    <!-- Here should have input conditionally displayed -->
                </div>
            </td>
            <td>
                <button class="btn btn-sm btn-info-outline"><i class="fa fa-ellipsis-h"></i></button>
                <button class="btn btn-sm btn-info-outline"><i class="fa fa-check"></i></button>
                <button class="btn btn-sm btn-info-outline"><i class="fa fa-eye"></i></button>
                <button class="btn btn-sm btn-info-outline"><i class="fa fa-print"></i></button>
            </td>
        </tr>

        <!-- order information extra detail -->

        <!-- Editing: Probably should only exist in 快递单号 column -->
    </template>
    </tbody>
</table>
