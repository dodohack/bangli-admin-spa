<!-- Login page template -->
<div class="login-wrapper">
    <div class="card card-block login-box">
        <div class="login-box-row">
            <a [routerLink]="['/register']" class="small float-right">注册</a>
            <h4>登录</h4>
        </div>

        <!--
        TODO: Ref https://auth0.com/blog/2016/05/03/angular2-series-forms-and-custom-validation/
        TODO: for advanced form validation
        -->
        <div *ngIf="error !== ''" class="alert alert-danger">
            {{ error }}
        </div>

        <form class="form-horizontal" role="form" (ngSubmit)="onSubmit()"
              #loginForm="ngForm">

            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-addon">
                        <i class="fa fa-envelope fa-lg"></i>
                    </span>
                    <input type="email" class="form-control" required
                           [(ngModel)]="form.email" name="email" placeholder="邮箱">
                </div>
            </div>

            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-addon">
                        <i class="fa fa-lock fa-lg"></i>
                    </span>
                    <input type="password" class="form-control" required
                           [(ngModel)]="form.password" name="password" placeholder="密码">
                </div>
            </div>

            <div class="clearfix login-box-row">
                <a href="{{ stage1_migration_url }}" target="_blank" class="small">第一次使用请点这里移植用户数据表</a>
                <a [routerLink]="['/reset-password']" class="small float-right">忘记密码</a>
            </div>

            <div class="login-box-row">
                <button type="submit" class="btn btn-block btn-outline-warning"
                        [disabled]="!loginForm.form.valid">登录</button>
            </div>

        </form>

    </div>
</div>
